---
layout: post
title: 10ì¥ íŠ¸ë¦¬
subtitle: 'tree, dfs, LCA'
date: '2021-04-19 00:09:00 -0400'
background: 'http://source.unsplash.com/category/nature/1600x900'
published: true
---

# íŠ¸ë¦¬ì˜ ìˆœíšŒ 

``` c
void dfs(int s,int e){
  // ë…¸ë“œ së¥¼ ì²˜ë¦¬í•œë‹¤.
  for(auto u:adj[s]){
    if(u!=e) dfs(u,s);
  }
}
```

# íŠ¸ë¦¬ì˜ ì§€ë¦„
---

[ë¬¸ì œë§í¬](https://www.acmicpc.net/problem/1967)

![ìº¡ì³](./img/posts/Post0419.JPG)

> ë¬´ë ¤ 15ë²ˆ ë§Œì— ë§ì·„ë‹¤;;;;ğŸ¤£ğŸ¤£ğŸ¤£


ë°©ë²•ì€ root ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ ë©€ë¦¬ìˆëŠ” leaf ë…¸ë“œë¥¼ ì°¾ëŠ”ë‹¤(ë‹¤ë¥¸ leaf ë…¸ë“œëŠ” linkedlistì— ë„£ì–´ë†“ëŠ”ë‹¤)

ë‘ leafë…¸ë“œ ê°„ì˜ ê±°ë¦¬ë¥¼ LCA(ê³µí†µì¡°ìƒ)ë¡œ ë¹„êµí•´ ìµœëŒ€ê°’ì„ ì°¾ëŠ”ë‹¤.


## ğŸ˜‚ë‚´ê°€ í‹€ë¦°ì´ìœ 

1. LCA ì“°ë©´ì„œ depì„ ê³ ë ¤ì•ˆí•¨

2. ë…¸ë“œì˜ ê°œìˆ˜ê°€2ê°œì¼ë–„ëŠ” ë¦¬í”„ë…¸ë“œê°„ì˜ ê±°ë¦¬ê°€ ì•„ë‹Œ ë¦¬í”„ì™€ ë£¨íŠ¸ê°„ì˜ ê±°ë¦¬ê°€ ìµœëŒ€ê°’ì´ë¯€ë¡œ ìµœëŒ€ê°’ì˜ dfsí›„ ì´ˆê¸°í™”ë¥¼ í•´ì¤˜ì•¼í•¨

3. ì´ˆê°€ê°’ ì •ì˜ë‘ ì˜ˆì™¸ì²˜ë¦¬ ëœí•¨ nullpoint ì—ëŸ¬ 


```java

import java.util.LinkedList;
import java.util.Scanner;

public class Main1967 {
	static class node{
		int p;
		int idx;
		int val;
		int dep;
		LinkedList<node> ch;
		public node() {
			super();
			ch=new LinkedList<>();
		}
	}
	static node[] list;
	public static void main(String[] args) {
		Scanner sc=new Scanner(System.in);
		int tc=sc.nextInt();
		list=new node[tc+1];
		for(int t=0;t<=tc;t++) {
			list[t]=new node();
			list[t].idx=t;
		}
		list[1].p=0;
		list[1].dep=1;
		for(int t=0;t<tc-1;t++) {
			int from=sc.nextInt();
			int to=sc.nextInt();
			int val=sc.nextInt();
			list[to].val=val;
			list[to].p=from;
			list[to].dep=list[from].dep+1;
			list[from].ch.add(list[to]);
		}
		leaf=new LinkedList<>();
		dfs(list[1],0);
		max=fall;
		for(int i=0;i<leaf.size();i++) {
			if(leaf.get(i)==fall_idx||list[fall_idx]==null||list[leaf.get(i)]==null)continue;
			getdist(list[fall_idx],list[leaf.get(i)],0);
			System.out.println(list[leaf.get(i)].idx+" "+fall_idx+" "+max);
		}
		System.out.println(max);
	}
	static int max;
	private static void getdist(node a, node b, int sum) {
		if(a.dep>b.dep&&list[a.p]!=null)getdist(list[a.p], b, sum+a.val);
		else if(a.dep<b.dep&&list[b.p]!=null) getdist(a, list[b.p], sum+b.val);
		else {
			if(a!=b&&list[a.p]!=null&&list[b.p]!=null)getdist(list[a.p], list[b.p], sum+a.val+b.val);
			else if(max<sum) {
				max=sum;
			}
		}
	}
	static int fall;
	static int fall_idx;
	static LinkedList<Integer> leaf;
	private static void dfs(node node, int sum) {
		if(node.ch.size()==0) {
			leaf.add(node.idx);
			if(sum>fall) {
				fall=sum;
				fall_idx=node.idx;
			}
		}
		for(int i=0;i<node.ch.size();i++) {
			dfs(node.ch.get(i),sum+node.ch.get(i).val);
		}
	}
}


```

> ì´ëŸ° ëˆ„ë”ê¸°ë§ê³ ;;; í›¨ì”¬ ìš°ì•„í•œ ì½”ë“œê°€ ìˆì„ ê²ƒì´ë‹¤. 

>> ë¬´í–¥ê·¸ë˜í”„ì´ë¯€ë¡œ êµ³ì´ parent ë¥¼ ì €ì¥í•  í•„ìš”ê°€ ì—†ì—ˆë‹¤. ì´ ê²½ìš° dfs í•¨ìˆ˜ ì¬í™œìš©ì´ ê°€ëŠ¥í•´ì§„ë‹¤.

>> nodeì˜ ê°œìˆ˜ê°€ 10^5 ì´ë¯€ë¡œ ì™„ì „íƒìƒ‰ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë§ˆì°¬ê°€ì§€ ì´ìœ ë¡œ ë©”ëª¨ë¦¬ì•„ì›ƒì— ê±¸ë¦¬ë¯€ë¡œ ì´ì°¨ì› ë°°ì—´ë¡œ ê·¸ë˜í”„ í‘œí˜„ë„ ì•ˆë¨.


*** ì•„ì§ íŠ¸ë¦¬ê°€ ë§ì´ ë¶€ì¡±í•˜ë‹¤. ë””ë²„ê¹…ë„ ë„ˆë¬´ ì˜¤ë˜ê±¸ë ¸ê³ , êµ¬ì¡° ì§œëŠ”ë°ë„ ë„ˆë¬´ ì‚ë„ë• ê±°ë¦°ë‹¤. ë§ì´ ì—°ìŠµí•´ì•¼í• ë“¯í•˜ë‹¤.
